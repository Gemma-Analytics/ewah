name: Claude Code Review

on:
  pull_request:
    types: [opened, synchronize]

permissions:
  id-token: write
  contents: read
  pull-requests: write
  issues: write

jobs:
  review:
    uses: Gemma-Analytics/.github/.github/workflows/claude-review.yml@main
    with:
      additional_instructions: |
        - Compliance with EWAH_ARCHITECTURE.md (component hierarchy, extract strategies, schema isolation)
        - Airflow 2.3.x compatibility (no 2.4+ features like setup/teardown tasks, datasets, airflow.sdk imports)
        - Python 3.10 compatibility (no 3.11+ features like ExceptionGroup, no 3.12+ type statement)
    secrets: inherit
